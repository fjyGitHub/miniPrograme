<wxs module="filters" src="../../utils/method.wxs"></wxs>
<view class="mask" wx:if="{{drawerShow}}" catchtap="onCloseModal" catchtouchmove='onTouchMove'>
<scroll-view scroll-y class="drawer {{animationShow ? 'drawer_show' : ''}}" wx:if="{{drawerShow}}">
	<view class="drawer_icon" catchtap="onCloseModal">
		<image src="/imgs/icon_sorts.png" />
	</view>
	<view class="category_all">
		<view class="category_box {{isAll ? 'selected' : '' }}" catchtap="selectAll">
			<text>全部宝贝</text>
			<image src="/imgs/icon_arrow.png" class="arrow_right" />
		</view>
	</view>
	<view class="category_item" wx:for="{{leftTapArray}}" wx:key="index">
		<view class="category_box {{item.isSelect ? 'selected' : ''}}" data-id="{{item.id}}" data-parentcateindex="{{index}}" catchtap="selectCategory">
			<text>{{item.name}}</text>
			<image src="/imgs/icon_arrow.png" class="arrow_right" />
		</view>
		<block wx:if="{{item.children.length}}">
			<view
				class="se_category {{ite.isSelect ? 'se_category_selected' : ''}}"
				wx:for="{{item.children}}"
				wx:for-item="ite"
				wx:for-index="ind"
				wx:key="ind"
				data-id="{{ite.id}}"
				catchtap="selectCategory"
				data-parentcateindex="{{index}}"
				data-childcateindex="{{ind}}"
			>{{ite.name}}</view>
		</block>
	</view>
</scroll-view>
</view>
<view class='container_search'>
	<navigator class='container_search_navi' url="/pages/search/search">{{keyword}}
		<icon type='search' size='18' color='rgba(158,168,177,1)'></icon>
	</navigator>
	<image src="/imgs/icon_sorts.png" catchtap='onOpenModal'/>
</view>
<block wx:if="{{good.length}}">
	<view class='search_family'>
		<view class='new {{rank == 0 ? "selected" : "normal"}}' data-id='0' bindtap='bindRank'>新品</view>
		<view class='sale_num {{rank == 1 ? "selected" : "normal"}}' data-id='1' bindtap='bindRank'>销量</view>
		<view class='family_arrow {{rank == 2 ? "selected" : "normal"}}' data-id='2' bindtap='bindRank'>
			<text>价格</text>
			<view class='arrows'>
				<text class='arrow_up {{flag==1?"up":""}}'></text><text class='arrow_down {{flag==2?"down":""}}'></text>
			</view>
		</view>
	</view>
	<view class="goods_list">
		<view class="goods_item" wx:for="{{good}}" wx:key="index" data-id="{{item.id}}" catchtap="onDetail">
			<image src="{{image}}{{item.cover_url}}" />
			<view class="goods_info">
				<view class="title">{{item.name}}</view>
				<view class="info">
					<text class="price"><text>￥</text>{{filters.ptf(item.price)}}</text>
					<text>销量{{item.sales_count}}件</text>
				</view>
			</view>
		</view>
	</view>
</block>
<block wx:else>
	<view class="empty">
		<image src="/imgs/img_nogood.png" />
		<view class="copywrite lite">宝贝还未上架~</view>
		<view class="copywrite">店家正在精心准备，尽请期待~</view>
	</view>
</block>

<!-- <view class='clearfix' style="height:{{2*winHeight}}rpx"> 
	<view class='left'>
		<scroll-view class='tab'  style="height:{{2*winHeight -86 }}rpx"   scroll-y="{{true}}">
			<view wx:for="{{leftTapArray}}" wx:key="{{index}}" data-idx='{{index}}' data-id='{{item.id}}' bindtap='leftCellTap' class="left_cell {{ index == select ? 'selected' : ''}}">{{item.name}}</view>
		</scroll-view>
	</view>
	<view class='right'>
		<scroll-view class='tab' scroll-y="{{true}}"  style="height:{{2*winHeight -120 }}rpx"  >
			<view>
			<block wx:if="{{second==1}}">
				<view class='right_flex'>
					<view wx:for="{{category}}" wx:key="{{index}}" data-idx='{{index}}' data-id='{{item.id}}' data-name='{{item.name}}' class='right_cell' bindtap='goList'>
						<image src='{{image}}{{item.icon_url}}?imageView2/1/w/104/h/114/imageslim'></image>
						<text>{{item.name}}</text>
					</view>
				</view>
			</block>
			<block wx:else>
				<view class='goods'>
					<view wx:for="{{goods}}" data-id='{{item.id}}' wx:key="{{index}}" class='goods_item' bindtap='goDetail'>
						<image src='{{image}}{{item.cover_url}}?imageslim'></image>
						<view class='descriptions'>
							<text>{{item.name}}</text>
							<text>销量{{item.sales_count}}件</text>
							<text>￥{{filters.toFix(item.price/100)}}</text>
							<text  wx:if="{{item.display_price!=0 && item.display_price}}">￥{{filters.toFix(item.display_price/100)}}</text>
						</view>
					</view>					
				</view>
			</block>
			</view>
		</scroll-view>
	</view> 
</view>  -->
